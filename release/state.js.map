{"version":3,"file":"state.js","sources":["../source/state.js"],"sourcesContent":["\r\n// //@ts-check\r\n\r\nimport { useState } from 'react/hooks'\r\n\r\n\r\nlet states = {};\r\n\r\nexport function setState(key, value){\r\n\r\n\tfor (const hook of states[key].hooks) {\r\n\t\t\r\n\t\t// console.log(hook);\r\n\t\thook(value)\r\n\t}\r\n}\r\n\r\nexport function useStore(key, init_value){\r\n\r\n\tconst [value, setValue] = useState(init_value !== undefined ? init_value : (states[key] || {}).initState)\r\n\tif (key in states){\r\n\t\t\r\n\t\t!~states[key].hooks.indexOf(setValue) && states[key].hooks.push(setValue);\r\n\t}\r\n\telse states[key] =  {\r\n\t\thooks: [setValue],\r\n\t\tinitState: init_value\r\n\t}\r\n\t\r\n\treturn [value, setState.bind(null, key)]\r\n}\r\n\r\nexport function initStore(init_dict){\r\n\r\n\tfor (const key in init_dict) {\r\n\t\tstates[key] = {\r\n\t\t\thooks: [],\r\n\t\t\tinitState: init_dict[key]\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\n"],"names":["useState"],"mappings":";;;CAMA,IAAI,MAAM,GAAG,EAAE,CAAC;AAChB;CACO,SAAS,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC;AACpC;CACA,CAAC,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE;CACvC;CACA;CACA,EAAE,IAAI,CAAC,KAAK,EAAC;CACb,EAAE;CACF,CAAC;AACD;CACO,SAAS,QAAQ,CAAC,GAAG,EAAE,UAAU,CAAC;AACzC;CACA,CAAC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGA,cAAQ,CAAC,UAAU,KAAK,SAAS,GAAG,UAAU,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,SAAS,EAAC;CAC1G,CAAC,IAAI,GAAG,IAAI,MAAM,CAAC;CACnB;CACA,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;CAC5E,EAAE;CACF,MAAM,MAAM,CAAC,GAAG,CAAC,IAAI;CACrB,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC;CACnB,EAAE,SAAS,EAAE,UAAU;CACvB,GAAE;CACF;CACA,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;CACzC,CAAC;AACD;CACO,SAAS,SAAS,CAAC,SAAS,CAAC;AACpC;CACA,CAAC,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE;CAC9B,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG;CAChB,GAAG,KAAK,EAAE,EAAE;CACZ,GAAG,SAAS,EAAE,SAAS,CAAC,GAAG,CAAC;CAC5B,IAAG;CACH,EAAE;CACF;;;;;;;;;;;;;;"}